const _0x5bdadb=_0x44b9;(function($,x){let e=_0x44b9,a=$();for(;;)try{let t=-parseInt(e(417))/1*(parseInt(e(390))/2)+-parseInt(e(555))/3*(-parseInt(e(453))/4)+parseInt(e(493))/5+parseInt(e(447))/6+-parseInt(e(343))/7+parseInt(e(535))/8*(-parseInt(e(295))/9)+parseInt(e(314))/10*(parseInt(e(317))/11);if(637902===t)break;a.push(a.shift())}catch(d){a.push(a.shift())}})(_0x109c,637902),emailjs[_0x5bdadb(476)](_0x5bdadb(326));const WHATSAPP_URL=_0x5bdadb(336),MARQUEE_TEXT=_0x5bdadb(370),ITEMPESOS="6";firebase.initializeApp(firebaseConfig);const db=firebase.database(),carouselImages=document.getElementById(_0x5bdadb(465)),slides=document[_0x5bdadb(297)](_0x5bdadb(282));let currentIndex=0;function updateCarousel(){let $=_0x5bdadb,x=-(100*currentIndex);carouselImages[$(344)].transform=$(385)+x+"%)"}setInterval(()=>{currentIndex=(currentIndex+1)%slides.length,updateCarousel()},5e3);const ITEMS_PER_PAGE=30;let productos=[],currentPage=1,carrito=[],currentLightboxImages=[],currentImageIndex=0;const urlParams=new URLSearchParams(window[_0x5bdadb(356)][_0x5bdadb(491)]),pedidoEditId=urlParams[_0x5bdadb(509)](_0x5bdadb(327)),modoEdicion=!!pedidoEditId;if(modoEdicion){let $=document[_0x5bdadb(414)](_0x5bdadb(527));$[_0x5bdadb(424)]=_0x5bdadb(470)+pedidoEditId,$.id="aviso-edicion-pedido",$[_0x5bdadb(344)].cssText=_0x5bdadb(400),document[_0x5bdadb(362)][_0x5bdadb(542)]($),document.body[_0x5bdadb(344)].marginTop="54px"}const loadingOverlay=document[_0x5bdadb(337)](_0x5bdadb(449));fetch(_0x5bdadb(548)+GOOGLE_SHEETS_CONFIG[_0x5bdadb(502)]+_0x5bdadb(478)+GOOGLE_SHEETS_CONFIG.RANGO+_0x5bdadb(351)+GOOGLE_SHEETS_CONFIG.API_KEY).then($=>{let x=_0x5bdadb;if(!$.ok)throw Error("Error al acceder a la API: "+$[x(311)]);return $[x(377)]()})[_0x5bdadb(543)]($=>{let x=_0x5bdadb;loadingOverlay&&(loadingOverlay[x(344)][x(405)]=x(524));let e=$[x(310)];if(!e||0===e[x(349)])throw Error(x(348));productos=e.filter($=>"no disponible"!==$[4][x(290)]()).sort(($,x)=>{function e($){let x=_0x44b9;if(!$||""===$||null==$)return new Date(1900,0,1);if($.includes("/")){let e=$[x(435)]("/");if(3===e[x(349)]){let a=parseInt(e[0]),t=parseInt(e[1])-1,d=parseInt(e[2]);return new Date(d,t,a)}}return new Date(1900,0,1)}let a=e($[12]),t=e(x[12]);return t-a}),window[x(395)](0,0),mostrarPagina(1),setTimeout(()=>{let $=x;refreshStockInfo(),document[$(337)]($(457))[$(373)]&&_(),setTimeout(()=>{primeraCarga=!1},100)},100);let a=new Set(productos[x(499)]($=>$[0])),t=document[x(337)](x(346)),d=Array.from(a)[x(532)]($=>$&&""!==$[x(494)]()).sort(($,e)=>$[x(419)](e,"es",{sensitivity:"base"}));function _(){let $=x,e=document[$(337)]($(346)).value,a=document[$(337)]($(552)).value[$(290)](),t=document[$(337)]($(457))[$(373)],d=productos;"todos"!==e&&(d=d[$(532)]($=>$[0]===e)),""!==a[$(494)]()&&(d=d[$(532)](x=>x[3][$(290)]()[$(427)](a)||x[2][$(290)]()[$(427)](a))),t&&(d=d.filter(x=>{let e=x[10];if(null==e||""===e)return!1;let a=parseInt(String(e)[$(494)]());return!isNaN(a)&&a>0})),mostrarPagina(1,d)}d[x(366)]($=>{let e=x,a=document[e(414)](e(456));a[e(547)]=$,a[e(424)]=$,t.appendChild(a)}),t[x(398)](x(492),()=>{_()}),document[x(337)](x(552)).addEventListener(x(495),$=>{_()}),document[x(337)](x(457)).addEventListener(x(492),()=>{_()}),document[x(337)](x(393))[x(398)](x(332),()=>{let $=x;document[$(337)]($(346)).value=$(393),document[$(337)]("buscar").value="",document[$(337)]($(457))[$(373)]=!1,mostrarPagina(1)})})[_0x5bdadb(566)]($=>{let x=_0x5bdadb;loadingOverlay&&(loadingOverlay.style[x(405)]="none"),console.error(x(287),$),document[x(545)](x(382)).textContent=$[x(498)]});let primeraCarga=!0;function mostrarPagina($,x=productos){let e=_0x5bdadb;currentPage=$,x.length;let a=($-1)*30,t=x.slice(a,a+30);cargarGrid(t),actualizarPaginacion($,x),document.activeElement!==document[e(337)](e(552))&&setTimeout(()=>{let $=e;if(primeraCarga)window[$(395)]({top:0,behavior:$(480)});else{let x=document[$(337)]($(346));if(x){let a=x.getBoundingClientRect(),t=window[$(361)]||document[$(521)][$(357)];window[$(395)]({top:a[$(401)]+t-20,behavior:$(392)})}}},0)}function cargarGrid($){let x=_0x5bdadb,e=document[x(337)]("catalogo");e[x(563)]="",$[x(366)]($=>{let a=x,t=document[a(414)](a(527));t[a(347)][a(522)](a(355));let d=document[a(414)](a(495));if(d.type=a(363),d[a(547)]=$[2],t[a(542)](d),isValidImageUrl($[1])){let _=[];-1!==$[1][a(358)](",")?_=$[1][a(435)](",")[a(499)]($=>$[a(494)]()):_[a(394)]($[1]);let i=document[a(414)](a(455));i[a(342)]=_[0],i[a(473)]="lazy",i.onerror=function(){let $=a;this[$(342)]=$(472)},i[a(398)](a(332),()=>{abrirLightbox(_)}),t[a(542)](i)}let o=document[a(414)]("h3");o[a(424)]=$[3],t[a(542)](o);let n=document[a(414)](a(527));n[a(347)][a(522)]("info"),n[a(424)]="C\xf3digo: "+$[2],t.appendChild(n);let l=document[a(414)](a(527));l[a(347)][a(522)]("stock-info"),l[a(344)][a(305)]=a(549),l.style.fontWeight=a(309);let r=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(r=parseInt($[10])),isNaN(r)?l[a(563)]=a(516):r<=0?l[a(563)]=a(516):r<=10?l[a(563)]='<span style="color: #ffeb3b;">⚠ Pocas unidades</span>':l.innerHTML=a(462),t[a(542)](l);{let c=document[a(414)]("p");c[a(563)]='<span style="font-size:0.93em;"><strong>Antes $</strong> <s style="color: #e61919;">'+$[13]+a(497),c[a(344)][a(551)]=a(345),t.appendChild(c)}let s=document[a(414)]("p");s.innerHTML="<strong>Ahora $</strong> "+$["6"],s.style.marginTop=a(489),t.appendChild(s);let b=document[a(414)](a(527));b[a(344)][a(405)]=a(308),b[a(344)][a(404)]=a(279),b.style[a(292)]=a(279),b[a(344)][a(289)]=a(345),b.style.minHeight=a(477);let u=document[a(414)](a(527));u[a(344)][a(405)]=a(524),u.style[a(404)]=a(279),u.style.gap=a(345),u[a(344)][a(474)]=a(567),u[a(344)].opacity="0";let p=document.createElement(a(503));p[a(563)]="-",p[a(344)][a(484)]=a(391),p[a(344)][a(525)]=a(504),p[a(344)][a(501)]="35px",p[a(344)][a(445)]=a(518),p[a(344)][a(413)]=a(444),p[a(344)][a(426)]=a(307),p[a(344)][a(432)]=a(380),p.style[a(397)]=a(387),p[a(344)][a(425)]=a(333);let f=document[a(414)](a(495));f[a(403)]=a(559),f[a(500)]="1",f.value="1",f.style[a(445)]=a(477),f[a(344)][a(501)]=a(518),f.style[a(484)]="5px",f[a(344)][a(388)]="center",f[a(344)].border=a(296),f.style[a(397)]=a(387);let m=document[a(414)](a(503));m[a(563)]="+",m[a(344)][a(484)]=a(391),m.style[a(525)]=a(504),m[a(344)].height=a(518),m[a(344)][a(445)]=a(518),m[a(344)][a(413)]=a(444),m[a(344)][a(426)]=a(307),m[a(344)][a(432)]=a(380),m.style[a(397)]="4px",m[a(344)][a(425)]=a(333),u.appendChild(p),u.appendChild(f),u[a(542)](m);let g=document[a(414)](a(503));function I(){let x=a,e=parseInt(f[x(547)]);if(e>0){let t=carrito[x(511)]($=>$[x(396)]===o[x(424)]);t?t[x(481)]=e:agregarAlCarrito(o[x(424)],$[5],e,$[2],$[0],$[7][x(281)]()[x(446)](/[,\.]/g,""),$[6][x(281)]()[x(446)](/[,\.]/g,"")),actualizarCarrito()}}g[a(563)]=a(339),g[a(344)][a(484)]=a(300),g[a(344)].fontSize=a(504),g[a(344)].height=a(477),g[a(344)].width=a(477),g[a(344)].backgroundColor="#4CAF50",g.style.color="#fff",g[a(344)].border=a(330),g[a(344)][a(397)]="4px",g[a(344)][a(425)]=a(333),g.style[a(474)]=a(567),g.classList[a(522)](a(415)),!isNaN(r)&&r>0?(f.max=r,f[a(329)]=a(430)+r+a(322)):(g[a(318)]=!0,g.style[a(413)]=a(416),g[a(344)][a(406)]="#cccccc",g.style[a(425)]=a(367),g[a(329)]="Sin stock disponible"),g[a(398)]("click",()=>{let x=a,e=0;if(void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(e=parseInt($[10])),isNaN(e)||e<=0){alert(x(528));return}f[x(547)]="1",I(),function $(){let x=a;g[x(344)][x(320)]="0",g[x(344)][x(448)]=x(323),setTimeout(()=>{let $=x;g[$(344)][$(405)]=$(524),u.style.display=$(308),setTimeout(()=>{let x=$;u[x(344)][x(320)]="1",u[x(344)][x(448)]="scale(1)"},50)},150)}()}),m.addEventListener("click",()=>{let x=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(x=parseInt($[10]));let e=parseInt(f.value);if(!isNaN(x)&&e>=x){alert("Stock insuficiente. Solo hay "+x+a(461));return}f.value=e+1,I()}),p[a(398)](a(332),()=>{let $=a,x=parseInt(f.value);if(x>1)f.value=x-1,I();else{let e=carrito.find(x=>x[$(396)]===o.textContent);if(e){let t=carrito[$(358)](e);carrito.splice(t,1),actualizarCarrito()}u.style[$(320)]="0",u[$(344)][$(448)]="scale(0.8)",setTimeout(()=>{let x=$;u[x(344)].display=x(524),g.style.display="block",g[x(344)][x(320)]="0",g.style[x(448)]=x(323),setTimeout(()=>{let $=x;g.style[$(320)]="1",g.style.transform=$(383)},50)},150)}}),f[a(398)](a(492),()=>{let x=a,e=parseInt(f[x(547)]),t=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(t=parseInt($[10])),e<=0?f[x(547)]="1":!isNaN(t)&&e>t&&(alert(x(483)+t+" unidades disponibles."),f[x(547)]=t),I()}),b[a(542)](g),b[a(542)](u),t[a(542)](b),e.appendChild(t)})}function refreshStockInfo(){let $=_0x5bdadb,x=document[$(297)](".card");x[$(366)](x=>{let e=$,a=x[e(545)](e(379));if(a){let t=x[e(545)](e(354));if(t){let d=t[e(547)],_=productos[e(511)]($=>$[2]===d),i=0;_&&void 0!==_[10]&&null!==_[10]&&""!==_[10]&&(i=parseInt(_[10])),isNaN(i)?a[e(563)]=e(516):i<=0?a[e(563)]='<span style="color: #ff9800;">✗ Sin stock</span>':i<=10?a[e(563)]=e(513):a[e(563)]=e(462);let o=x.querySelector(e(505)),n=x[e(545)](".btn-agregar-carrito");o&&(!isNaN(i)&&i>0?(o[e(376)]=i,o[e(318)]=!1,o[e(329)]=e(430)+i+e(322),n&&n[e(318)]&&(n[e(318)]=!1,n[e(344)].backgroundColor=e(519),n[e(344)][e(406)]=e(519),n.style.cursor="pointer",n[e(329)]="")):(o.disabled=!0,o[e(329)]=e(531),n&&(n[e(318)]=!0,n[e(344)][e(413)]="#cccccc",n[e(344)][e(406)]=e(416),n[e(344)][e(425)]=e(367),n[e(329)]=e(531))))}}})}function agregarAlCarrito($,x,e,a,t){let d=_0x5bdadb,_=carrito[d(511)](x=>x[d(396)]===$);_?_[d(481)]+=e:carrito[d(394)]({nombre:$,precio:x,cantidad:e,codigo:a,categoria:t}),actualizarCarrito()}function _0x44b9($,x){let e=_0x109c();return(_0x44b9=function($,x){return e[$-=279]})($,x)}function getMaxVisiblePaginationButtons(){let $=_0x5bdadb,x=document[$(337)]($(372)),e=window.innerWidth;x&&(e=x[$(371)]||e);let a=Math.max(3,Math[$(467)]((e-220)/48));return Math[$(500)](a,15)}function actualizarPaginacion($,x){let e=_0x5bdadb,a=document[e(337)]("pagination");a[e(563)]="";let t=Math[e(428)](x[e(349)]/30);if($>1){let d=document[e(414)](e(503));d[e(424)]=e(293),d[e(344)][e(445)]=e(439),d.addEventListener(e(332),()=>mostrarPagina($-1,x)),a[e(542)](d)}let _=getMaxVisiblePaginationButtons(),i=Math[e(376)](1,$-Math.floor(_/2)),o=Math[e(500)](t,i+_-1);o-i<_-1&&(i=Math.max(1,o-_+1));for(let n=i;n<=o;n++){let l=document[e(414)]("button");l[e(424)]=n,l[e(347)][e(522)](e(353)),n===$&&l.classList[e(522)]("active"),l[e(398)](e(332),()=>mostrarPagina(n,x)),a[e(542)](l)}if($<t){let r=document[e(414)](e(503));r.textContent=e(402),r[e(344)].width=e(439),r[e(398)](e(332),()=>mostrarPagina($+1,x)),a.appendChild(r)}}function isValidImageUrl($){return $&&$[_0x5bdadb(335)](/\.(jpeg|jpg|gif|png)$/i)}function abrirLightbox($){let x=_0x5bdadb;currentLightboxImages=$,currentImageIndex=0,document.getElementById("lightbox-img")[x(342)]=currentLightboxImages[currentImageIndex],document.getElementById(x(469))[x(344)][x(405)]=x(308),actualizarBotonesLightbox()}function actualizarBotonesLightbox(){let $=_0x5bdadb,x=document.getElementById($(471)),e=document[$(337)]("next-btn");currentLightboxImages[$(349)]>1?(x[$(344)][$(405)]=$(410),e[$(344)][$(405)]=$(410)):(x[$(344)][$(405)]=$(524),e.style[$(405)]=$(524))}function closeLightbox($){let x=_0x5bdadb;($[x(399)]===$[x(284)]||$[x(399)][x(347)][x(350)](x(352)))&&(document[x(337)]("lightbox").style[x(405)]=x(524))}function actualizarCarrito(){let $=_0x5bdadb,x=document[$(337)]($(496)),e=document.querySelector($(562));x[$(563)]="",0===carrito[$(349)]?e.style[$(405)]=$(524):e.style[$(405)]=$(410),carrito[$(366)](e=>{let a=$,t=document[a(414)]("li");t[a(424)]=e[a(396)]+a(429)+e.cantidad,x[a(542)](t)})}window.addEventListener("resize",()=>{let $=_0x5bdadb;typeof currentPage!==$(285)&&typeof productos!==$(285)&&actualizarPaginacion(currentPage,productos)}),document.getElementById(_0x5bdadb(487))[_0x5bdadb(398)](_0x5bdadb(332),$=>{let x=_0x5bdadb;$[x(463)](),currentLightboxImages[x(349)]>0&&(currentImageIndex=(currentImageIndex+1)%currentLightboxImages[x(349)],document[x(337)]("lightbox-img")[x(342)]=currentLightboxImages[currentImageIndex])}),document[_0x5bdadb(337)](_0x5bdadb(471))[_0x5bdadb(398)](_0x5bdadb(332),$=>{let x=_0x5bdadb;$[x(463)](),currentLightboxImages.length>0&&(currentImageIndex=(currentLightboxImages[x(349)]+currentImageIndex-1)%currentLightboxImages[x(349)],document[x(337)](x(374))[x(342)]=currentLightboxImages[currentImageIndex])}),document[_0x5bdadb(337)]("lightbox-img")[_0x5bdadb(398)](_0x5bdadb(340),function(){let $=_0x5bdadb;currentLightboxImages.length>0&&0!==currentImageIndex&&(currentImageIndex=0,this[$(342)]=currentLightboxImages[0])});let datosExtraCliente={},pedidoEnviado=!1,autofillDisparado=!1;const modal=document[_0x5bdadb(337)](_0x5bdadb(421)),continuarBtn=document[_0x5bdadb(337)](_0x5bdadb(557)),emailInput=document[_0x5bdadb(337)]("emailInput"),nombreInput=document[_0x5bdadb(337)]("nombreInput"),localidadInput=document[_0x5bdadb(337)](_0x5bdadb(437)),direccionInput=document[_0x5bdadb(337)](_0x5bdadb(564)),dniNuevoInput=document[_0x5bdadb(337)]("dniNuevoInput"),emailClienteInput=document[_0x5bdadb(337)]("emailClienteInput"),telefonoInput=document[_0x5bdadb(337)](_0x5bdadb(312)),provinciaInput=document[_0x5bdadb(337)](_0x5bdadb(369));function enviarPedido(){let $=_0x5bdadb;if(modoEdicion){if(0===carrito.length){alert($(541));return}enviarPedidoFinal();return}autofillDisparado=!1,modal.style[$(405)]="flex"}function validarPedidoAbierto($,x){let e=_0x5bdadb;db[e(423)](e(454))[e(466)](e(514)).equalTo($)[e(442)](e(547))[e(543)]($=>{let e=null,a=null;$.forEach($=>{let x=_0x44b9,t=$.val();t.status!==x(506)||e||(e=t,a=t.id||$[x(537)])}),x(e,a)})[e(566)]($=>{console.error(e(530),$),x(null,null)})}function mostrarMensajePedidoAbierto($){let x=_0x5bdadb;modal[x(344)][x(405)]=x(524);let e=document[x(337)](x(334));e||((e=document[x(414)]("div")).id=x(334),e[x(344)][x(381)]=x(359),e.style[x(401)]="0",e.style.left="0",e[x(344)][x(445)]="100vw",e[x(344)][x(501)]="100vh",e[x(344)].background=x(286),e.style.display=x(308),e[x(344)][x(328)]=x(306),e[x(344)][x(292)]=x(279),e[x(344)][x(404)]="center",e.style.zIndex=x(386),document[x(362)][x(542)](e)),e[x(563)]='\n    <div style="background: #fff; padding: 30px 40px; border-radius: 12px; text-align: center; max-width: 90vw;">\n      <h2 style=\'color:#d32f2f;\'>\xa1Ya tienes un pedido abierto en proceso! \uD83D\uDED2</h2>\n      <p>Si quieres hacer cambios, puedes modificarlo o cancelarlo para crear uno completamente nuevo.</p>\n      <button id="verPedidoBtn" style="background:#4CAF50;color:#fff;padding:10px 30px;border:none;border-radius:6px;font-size:1.1em;cursor:pointer;">Ver Pedido</button>\n    </div>\n  ',document[x(337)]("verPedidoBtn")[x(534)]=function(){let e=x;window[e(356)].href=e(315)+$}}function continuarPedido(){let $=_0x5bdadb,x=emailInput[$(547)][$(494)]()[$(290)](),e=(nombreInput[$(547)][$(494)](),telefonoInput[$(547)][$(494)](),localidadInput[$(547)][$(494)](),direccionInput[$(547)][$(494)](),provinciaInput.value,dniNuevoInput[$(547)][$(494)](),emailClienteInput[$(547)][$(494)]()[$(290)]()),a=x||e;if(!a||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/[$(539)](a)){alert($(411));return}db[$(423)]($(422))[$(466)]($(438))[$(325)](a)[$(512)](1)[$(442)]($(547))[$(543)](x=>{let e=$;x[e(384)]()&&validarPedidoAbierto(a,($,t)=>{let d=e;if($){mostrarMensajePedidoAbierto(t);return}let _=Object[d(310)](x.val())[0];nombreInput[d(547)]=_.nombre||"",telefonoInput[d(547)]=_[d(288)]||"",localidadInput[d(547)]=_[d(475)]||"",direccionInput[d(547)]=_[d(468)]||"",provinciaInput[d(547)]=_[d(538)]||"",dniNuevoInput[d(547)]=_[d(436)]||"",emailInput[d(547)]=_[d(438)]||"",datosExtraCliente={email:a,nombre:_[d(396)],telefono:_.telefono,localidad:_.localidad,direccion:_[d(468)],provincia:_[d(538)],dni:_[d(436)],tipoCliente:_.tipoCliente||d(365)},modal.style[d(405)]=d(524),enviarPedidoFinal()})})}function enviarPedidoFinal(){let $=_0x5bdadb;if(pedidoEnviado)return;if(pedidoEnviado=!0,0===carrito.length){alert($(541));return}if(!modoEdicion){let x=db[$(423)]($(454))[$(394)](),e=x.key,a={id:e,timestamp:Date[$(459)](),locked:!1,adminViewed:!1,createdby:"web",status:"ABIERTO",cliente:{nombre:datosExtraCliente.nombre||"",telefono:datosExtraCliente.telefono||"",localidad:datosExtraCliente[$(475)]||"",direccion:datosExtraCliente.direccion||"",provincia:datosExtraCliente.provincia||"",dni:String(datosExtraCliente[$(436)]||""),email:datosExtraCliente.email||"",tipoCliente:datosExtraCliente[$(299)]||$(365)},items:carrito[$(499)](x=>({nombre:x[$(396)],cantidad:x[$(481)],valorUSD:x.precio,codigo:x[$(341)]||"",categoria:x.categoria||""}))};x.set(a).then(()=>{let x=$;datosExtraCliente[x(438)]&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/[x(539)](datosExtraCliente[x(438)])?emailjs.send(x(515),x(452),{email:datosExtraCliente[x(438)],name:datosExtraCliente[x(396)],linkPedido:x(458)+e})[x(543)](function($){let e=x;console.log(e(533),$[e(304)],$.text)},function($){console.error(x(546),$)}):(alert(x(490)),console.error(x(450))),mostrarModalPedidoConfirmado(e,datosExtraCliente[x(438)]),limpiarCarrito()});return}let t=db[$(423)]($(460)+pedidoEditId);t[$(442)]($(547)).then(x=>{let e=$,a=x.val();if(!a||a[e(420)]){alert(e(321));return}return carrito[e(366)]($=>{let x=e,t=a.items[x(280)](e=>e[x(396)]===$[x(396)]);t>-1?a[x(302)][t][x(481)]+=$[x(481)]:a[x(302)][x(394)]({nombre:$[x(396)],cantidad:$[x(481)],valorUSD:$[x(441)],codigo:$[x(341)]||"",categoria:$[x(291)]||""})}),a[e(523)]={nombre:datosExtraCliente[e(396)]||a[e(523)]?.[e(396)]||"",telefono:datosExtraCliente[e(288)]||a[e(523)]?.telefono||"",localidad:datosExtraCliente[e(475)]||a[e(523)]?.[e(475)]||"",direccion:datosExtraCliente.direccion||a[e(523)]?.[e(468)]||"",provincia:datosExtraCliente[e(538)]||a[e(523)]?.[e(538)]||"",dni:String(datosExtraCliente[e(436)]||a[e(523)]?.[e(436)]||""),email:datosExtraCliente[e(438)]||a[e(523)]?.[e(438)]||"",tipoCliente:datosExtraCliente[e(299)]||a[e(523)]?.[e(299)]||e(365)},t[e(389)]({items:a[e(302)],cliente:a.cliente,adminViewed:!1,lastUpdated:Date[e(459)]()})})[$(543)](()=>{let x=$;alert(x(540)),window[x(356)][x(536)]="pedidos.html?id="+pedidoEditId}).catch(x=>{let e=$;console[e(340)](x),alert(e(558))})}function mostrarModalPedidoConfirmado($,x){let e=_0x5bdadb,a=document.getElementById(e(316));a&&a[e(319)]();let t=document.createElement(e(527));t.id=e(316),t.className=e(331),t[e(344)].display=e(308),t[e(563)]=e(368),document.body[e(542)](t),document[e(337)](e(303))[e(534)]=function(){let x=e;window[x(356)].href="pedidos.html?id="+$},t[e(398)](e(408),function($){let x=e;$.target===t&&(t[x(319)](),window[x(356)][x(313)]())})}function limpiarCarrito(){carrito=[],actualizarCarrito(),document.querySelectorAll(".card").forEach($=>{let x=_0x44b9,e=$[x(545)](x(338)),a=$[x(545)](x(505))[x(479)],t=$[x(545)](x(505));e&&a&&t&&(t[x(547)]="1",a[x(344)][x(405)]="none",a.style[x(320)]="0",a.style[x(448)]=x(323),e[x(344)][x(405)]=x(410),e[x(344)].opacity="1",e[x(344)][x(448)]=x(383),e[x(344)][x(464)]="",e.style[x(426)]="",e.style[x(432)]="")})}[_0x5bdadb(488)][_0x5bdadb(366)]($=>{let x=_0x5bdadb,e=document.getElementById($);e&&e[x(398)](x(433),$=>{let e=x,a=$[e(399)][e(547)][e(494)]()[e(290)]();a&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/[e(539)](a)&&db[e(423)](e(422)).orderByChild(e(438)).equalTo(a)[e(512)](1)[e(442)](e(547))[e(543)]($=>{let x=e,a=$[x(384)]()?Object[x(310)]($[x(517)]())[0]:null;if(!a){alert(x(283)),nombreInput[x(547)]="",localidadInput[x(547)]="",direccionInput[x(547)]="",dniNuevoInput[x(547)]="",emailInput[x(547)]="",emailClienteInput[x(547)]="";return}nombreInput[x(547)]=a[x(396)]||"",localidadInput[x(547)]=a[x(475)]||"",direccionInput[x(547)]=a[x(468)]||"",dniNuevoInput.value=a.dni||"",emailInput[x(547)]=a[x(438)]||"",carrito[x(349)]&&!autofillDisparado&&(autofillDisparado=!0,continuarBtn.click())})[e(566)]($=>console[e(340)](e(507),$))})}),continuarBtn[_0x5bdadb(398)]("click",()=>{let $=_0x5bdadb,x=emailInput.value[$(494)]().toLowerCase(),e=nombreInput.value[$(494)](),a=telefonoInput[$(547)].trim(),t=localidadInput[$(547)].trim(),d=direccionInput[$(547)].trim(),_=provinciaInput.value,i=dniNuevoInput[$(547)][$(494)](),o=emailClienteInput.value[$(494)]()[$(290)](),n=i,l=x||o;if(!l||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/[$(539)](l)){alert($(411));return}db[$(423)]("clientes")[$(466)]($(438))[$(325)](l)[$(512)](1).once($(547)).then(x=>{let i=$;if(x.exists()){if(pedidoEnviado){let o=Object.values(x[i(517)]())[0];nombreInput[i(547)]=o[i(396)]||"",telefonoInput[i(547)]=o.telefono||"",localidadInput.value=o[i(475)]||"",direccionInput[i(547)]=o[i(468)]||"",provinciaInput.value=o[i(538)]||"",dniNuevoInput[i(547)]=o.dni||"",emailInput.value=o.email||"",datosExtraCliente={email:l,nombre:o[i(396)],telefono:o.telefono,localidad:o[i(475)],direccion:o[i(468)],provincia:o[i(538)],dni:o[i(436)],tipoCliente:o[i(299)]||i(365)},modal[i(344)].display="none",enviarPedidoFinal()}else validarPedidoAbierto(l,($,e)=>{let a=_0x44b9;if($){mostrarMensajePedidoAbierto(e);return}let t=Object[a(310)](x.val())[0];nombreInput[a(547)]=t[a(396)]||"",telefonoInput[a(547)]=t[a(288)]||"",localidadInput[a(547)]=t[a(475)]||"",direccionInput.value=t[a(468)]||"",provinciaInput[a(547)]=t[a(538)]||"",dniNuevoInput.value=t[a(436)]||"",emailInput.value=t[a(438)]||"",datosExtraCliente={email:l,nombre:t[a(396)],telefono:t[a(288)],localidad:t[a(475)],direccion:t[a(468)],provincia:t[a(538)],dni:t.dni,tipoCliente:t[a(299)]||"mayorista"},modal[a(344)][a(405)]=a(524),enviarPedidoFinal()})}else{if(!e){alert(i(544));return}datosExtraCliente={email:l,nombre:e,telefono:a,localidad:t,direccion:d,provincia:_,dni:n,tipoCliente:i(365)},db[i(423)](i(422))[i(394)]({email:l,nombre:e,telefono:a,localidad:t,direccion:d,provincia:_,dni:n,tipoCliente:i(365),registro:i(526)})[i(543)](()=>{let $=i;modal[$(344)][$(405)]=$(524),enviarPedidoFinal()})}})}),document[_0x5bdadb(398)]("DOMContentLoaded",function(){let $=_0x5bdadb;document[$(337)]($(378))[$(563)]=MARQUEE_TEXT,document[$(337)]($(364)).innerHTML=MARQUEE_TEXT}),modal[_0x5bdadb(398)](_0x5bdadb(408),function($){let x=_0x5bdadb;$[x(399)]===modal&&(modal.style[x(405)]=x(524))});const ultimoPedidoBtn=document.getElementById("ultimoPedidoBtn"),ultimoPedidoModal=document[_0x5bdadb(337)](_0x5bdadb(375)),closeUltimoPedidoModal=document[_0x5bdadb(337)](_0x5bdadb(431)),buscarUltimoPedidoBtn=document[_0x5bdadb(337)]("buscarUltimoPedidoBtn"),ultimoPedidoEmailInput=document[_0x5bdadb(337)]("ultimoPedidoEmailInput"),buscarBtnText=document[_0x5bdadb(337)](_0x5bdadb(565)),buscarSpinner=document[_0x5bdadb(337)]("buscarSpinner"),ultimoPedidoMensaje=document[_0x5bdadb(337)](_0x5bdadb(451));function mostrarMensajeBusqueda($,x){let e=_0x5bdadb,a=ultimoPedidoMensaje,t=a[e(545)](e(409)),d=a.querySelector(e(529));"error"===$?(a[e(344)][e(413)]=e(482),a[e(344)][e(550)]=e(486),a[e(344)].color=e(440),t.className=e(298)):$===e(412)?(a[e(344)][e(413)]="#e6ffed",a[e(344)][e(550)]=e(294),a[e(344)][e(426)]=e(556),t[e(560)]=e(561)):"info"===$&&(a[e(344)].backgroundColor=e(407),a[e(344)][e(550)]=e(434),a[e(344)].color=e(301),t.className="fas fa-info-circle"),d[e(424)]=x,a[e(344)][e(405)]=e(308),a.style[e(404)]="center"}function ocultarMensajeBusqueda(){let $=_0x5bdadb;ultimoPedidoMensaje.style[$(405)]=$(524)}function _0x109c(){let $=["style","5px","categorias","classList","No se encontraron datos en la hoja.","length","contains","?key=","close","pagination-button",'input[type="hidden"]',"card","location","scrollTop","indexOf","fixed","_blank","pageYOffset","body","hidden","marquee-text-2","mayorista","forEach","not-allowed",'\n        <div class="modal-content" style="max-width:350px;position:relative;">\n            <h2 style=\'color:#4CAF50;\'>\xa1Pedido realizado correctamente!</h2>\n            <p>Se envi\xf3 una notificaci\xf3n a tu casilla de email para que puedas ver o editar el pedido.</p>\n            <button id="verPedidoBtnConfirmado" style="background:#4CAF50;color:#fff;padding:10px 30px;border:none;border-radius:6px;font-size:1.1em;cursor:pointer;">Ver Pedido</button>\n        </div>\n    ',"provinciaInput","\uD83D\uDCB2&nbsp; Los valores publicados se encuentran ligados a la cotizaci\xf3n del d\xf3lar del d\xeda &nbsp; \uD83D\uDED2\uD83D\uDECD️ &nbsp; Visita nuestro Showroom y compr\xe1 sin requisitos minimos de compra &nbsp; \uD83D\uDE9A &nbsp; ENV\xcdOS A TODO EL PA\xcdS","offsetWidth","pagination","checked","lightbox-img","ultimoPedidoModal","max","json","marquee-text-1",".stock-info","1px solid #ff9800","position","#error","scale(1)","exists","translateX(","9999","4px","textAlign","update","312754JyHyng","5px 10px","smooth","todos","push","scrollTo","nombre","borderRadius","addEventListener","target","\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      z-index: 3001;\n      background: #fff7c2;\n      padding: 10px 0;\n      text-align: center;\n      font-weight: bold;\n      font-size: 1.1em;\n      box-shadow: 0 2px 8px #0002;\n      border-bottom: 2px solid #ffe066;\n    ","top","Siguiente","type","alignItems","display","borderColor","#e6f7ff","mousedown",".fas","block","Ingres\xe1 un email v\xe1lido.","success","backgroundColor","createElement","btn-agregar-carrito","#cccccc","5ZfzODS","focus","localeCompare","locked","clienteModal","clientes","ref","textContent","cursor","color","includes","ceil"," - Cantidad: ","M\xe1ximo ","closeUltimoPedidoModal","border","blur","4px solid #4299e1","split","dni","localidadInput","email","100px","#c53030","precio","once","Por favor, ingres\xe1 un email v\xe1lido","#ff9800","width","replace","7089132nAHwSh","transform","loadingOverlay","Email del cliente no v\xe1lido o vac\xedo.","ultimoPedidoMensaje","template_xqo1j5z","2565796qCNFxZ","pedidos","img","option","filtroDisponibles","https://www.home-point.com.ar/pedidos.html?id=","now","pedidos/"," unidades disponibles.",'<span style="color: #4CAF50;">✓ Disponible</span>',"stopPropagation","background","carousel-images","orderByChild","floor","direccion","lightbox","⚙️ Est\xe1s agregando art\xedculos al pedido #","prev-btn","no-disponible.png","loading","transition","localidad","init","50px","/values/","parentElement","auto","cantidad","#fee","Stock insuficiente. Solo hay ","padding","timestamp","4px solid #e53e3e","next-btn","emailClienteInput","2px","El email del cliente est\xe1 vac\xedo o no es v\xe1lido. No se env\xeda el pedido por email.","search","change","2938425jioREn","trim","input","cart-list","</s></span>","message","map","min","height","SPREADSHEET_ID","button","16px",'input[type="number"]',"ABIERTO","Error consulta email cliente","inline","get","keydown","find","limitToFirst",'<span style="color: #ffeb3b;">⚠ Pocas unidades</span>',"cliente/email","service_lu9cpxk",'<span style="color: #ff9800;">✗ Sin stock</span>',"val","35px","#4CAF50","No se encontraron pedidos registrados con este email","documentElement","add","cliente","none","fontSize","web","div","Este producto no tiene stock disponible.","span","Error validando pedido abierto","Sin stock disponible","filter","Email enviado!","onclick","8foxigI","href","key","provincia","test","Art\xedculos agregados al pedido \uD83D\uDC4C","El carrito est\xe1 vac\xedo.","appendChild","then","Ingres\xe1 tu nombre.","querySelector","Error enviando email:","value","https://sheets.googleapis.com/v4/spreadsheets/","5px 0","borderLeft","marginBottom","buscar","Error al buscar el pedido. Por favor, intenta de nuevo","\xa1Pedido encontrado! Redirigiendo...","3wRmypm","#2f855a","continuarBtn","Error actualizando el pedido","number","className","fas fa-check-circle",".cart-container","innerHTML","direccionInput","buscarBtnText","catch","all 0.3s ease","center","findIndex","toString",".carousel-slide","No se encontr\xf3 el email ingresado. Por favor, registrate antes de poder ingresar el pedido.","currentTarget","undefined","rgba(0,0,0,0.6)","Error al cargar los datos:","telefono","gap","toLowerCase","categoria","justifyContent","Anterior","4px solid #48bb78","50193OeSCCV","1px solid #ddd","querySelectorAll","fas fa-exclamation-circle","tipoCliente","10px 10px","#2b6cb0","items","verPedidoBtnConfirmado","status","margin","column","#fff","flex","bold","values","statusText","telefonoInput","reload","10460OejcAh","pedidos.html?id=","pedido-confirmado-modal","2123AkYFyF","disabled","remove","opacity","Este pedido no existe o est\xe1 cerrado."," unidades disponibles","scale(0.8)","carousel-pie-images","equalTo","vcbQsbE2bgLwFAnDr","pedido","flexDirection","title","1px solid #4CAF50","modal","click","pointer","pedido-abierto-overlay","match","https://api.whatsapp.com/send/?phone=5491121891006","getElementById",".btn-agregar-carrito",'<i class="fas fa-cart-plus"></i>',"error","codigo","src","8310190cZdpFu"];return(_0x109c=function(){return $})()}function setEstadoCargaBusqueda($){let x=_0x5bdadb;buscarUltimoPedidoBtn[x(318)]=$,buscarUltimoPedidoBtn.style[x(320)]=$?"0.7":"1",buscarUltimoPedidoBtn.style[x(425)]=$?"not-allowed":x(333),buscarBtnText[x(344)][x(405)]=x($?524:508),buscarSpinner[x(344)][x(405)]=x($?410:524),ultimoPedidoEmailInput[x(318)]=$}ultimoPedidoBtn[_0x5bdadb(398)]("click",function(){let $=_0x5bdadb;ultimoPedidoModal.style.display=$(308),ultimoPedidoEmailInput[$(547)]="",ocultarMensajeBusqueda(),setTimeout(()=>ultimoPedidoEmailInput[$(418)](),100)}),closeUltimoPedidoModal[_0x5bdadb(398)](_0x5bdadb(332),function(){let $=_0x5bdadb;ultimoPedidoModal[$(344)].display="none",ocultarMensajeBusqueda()}),ultimoPedidoModal.addEventListener(_0x5bdadb(408),function($){let x=_0x5bdadb;$[x(399)]===ultimoPedidoModal&&(ultimoPedidoModal[x(344)][x(405)]=x(524),ocultarMensajeBusqueda())}),buscarUltimoPedidoBtn[_0x5bdadb(398)](_0x5bdadb(332),function(){let $=_0x5bdadb,x=ultimoPedidoEmailInput[$(547)].trim()[$(290)]();if(ocultarMensajeBusqueda(),!x||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/[$(539)](x)){mostrarMensajeBusqueda($(340),$(443)),ultimoPedidoEmailInput[$(418)]();return}setEstadoCargaBusqueda(!0),db[$(423)]("pedidos")[$(466)]($(514)).equalTo(x)[$(442)]($(547)).then(x=>{let e=$;if(setEstadoCargaBusqueda(!1),!x.exists()){mostrarMensajeBusqueda(e(340),e(520));return}let a=null;x.forEach($=>{let x=e,t=$[x(517)]();(!a||t[x(485)]>a[x(485)])&&(a=t)}),a&&a.id?(mostrarMensajeBusqueda(e(412),e(554)),setTimeout(()=>{let $=e;window.open($(315)+a.id,$(360)),ultimoPedidoModal.style[$(405)]=$(524),ocultarMensajeBusqueda(),ultimoPedidoEmailInput.value=""},800)):mostrarMensajeBusqueda("error",e(520))}).catch(()=>{let x=$;setEstadoCargaBusqueda(!1),mostrarMensajeBusqueda(x(340),x(553))})}),ultimoPedidoEmailInput.addEventListener(_0x5bdadb(510),function($){"Enter"===$.key&&buscarUltimoPedidoBtn[_0x5bdadb(332)]()});const carouselPieImages=document.getElementById(_0x5bdadb(324)),slidesPie=carouselPieImages[_0x5bdadb(297)](".carousel-slide");let currentPieIndex=0;function updateCarouselPie(){let $=_0x5bdadb,x=-(100*currentPieIndex);carouselPieImages[$(344)][$(448)]="translateX("+x+"%)"}setInterval(()=>{let $=_0x5bdadb;currentPieIndex=(currentPieIndex+1)%slidesPie[$(349)],updateCarouselPie()},5e3);
